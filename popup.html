<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./assets/styles/main.css" />
    <title>Vesna | project</title>
  </head>
  <body>
    <header class="header">
      <div class="header__fitst-line">
        <!-- popup для кнопки бесплатная консультация в header -->
          <!-- Кнопка для открытия формы -->
          <div class="popup-open__button-container">
            <button class="button button--transparent" onclick="openWindow('consult__popupWindow')">
              Бесплатная консультация
            </button>
          </div>
          <!-- контейнер для размытия элементов за попапом -->
          <div class="overlay" id="overlay"></div>
          <!-- сам попап -->
          <div class="popup" id="consult__popupWindow">
            <div class="popup__backdrop"></div>
            <div class="popup__wrapper">
                <button class="popup__close-btn" onclick="closewindow('consult__popupWindow')">
                    <!-- <img 
                    src="./assets/icons/close-icon.svg" 
                    alt="иконка крестика" class="popup__close-icon--default"> -->
                    <span></span>
                    
                </button>
                <h2 class="popup__title">Закажите консультацию</h2>
                <p class="popup__description">Менеджер перезвонит Вам в&nbsp;ближайшее время</p>
                <form action="submit" class="form">
                  <div class="form__input-group">
                    <div class="form__input-container">
                      <input
                        type="text"
                        name="name"
                        id="userName"
                        placeholder=" "
                        class="form__input-field form__input-field--name"
                        required
                      />
                      <label for="userName" class="form__input-label">Имя</label>
                    </div>
                    <div class="form__input-container">
                      <input
                        type="tel"
                        id="userPhone"
                        name="phone"
                        placeholder=" "
                        pattern="[0-9]{3}-[0-9]{3}-[0-9]{2}-[0-9]{2}"
                        class="form__input-field form__input-field--tel"
                        required
                      />
                      <label for="userPhone" class="form__input-label--default"
                        >+7 (___) ___ __ __</label
                      >
                      <label for="userPhone" class="form__input-label--focus"
                        >Телефон</label
                      >
                    </div>
                    <div class="form__consent-container">
                      <input
                        type="checkbox"
                        name="popup-order-consult__userConsent"
                        id="popup-order-consult__userConsent"
                        class="form__consent-checkbox"
                        checked
                        required
                      />
                      <label for="popup-order-consult__userConsent" class="form__consent-label"
                        >Я даю согласие на обработку своих
                        <a href="#" class="form__consent-link"
                          >персональных данных</a
                        ></label
                      >
                    </div>
                  </div>
                  <div class="popup__button-container">
                    <button type="submit"
                    class="button button--olive-large">
                      Перезвоните мне
                    </button>
                </form>
            </div>
        </div>
      </div>
      <div class="header__gallery"></div>
    </header>
    <main class="main">
        <!-- popup для кнопки перезвоните мне в блоке Остались вопросы -->
          <!-- Кнопка для открытия формы -->
          <div class="popup-open__button-container">
            <button class="button button--olive-large" onclick="openWindow('call-back__popupWindow')">
                Перезвоните мне
            </button>
          </div>
          <!-- контейнер для размытия элементов за попапом -->
          <div class="overlay" id="overlay"></div>
          <!-- сам попап -->
          <div class="popup" id="call-back__popupWindow">
            <div class="popup__backdrop"></div>
            <div class="popup__wrapper">
                <button class="popup__close-btn" onclick="closewindow('call-back__popupWindow')">
                    <!-- <img 
                    src="./assets/icons/close-icon.svg" 
                    alt="иконка крестика" class="popup__close-icon"> -->
                    <span></span>
                </button>
                <h2 class="popup__title">Обратный звонок</h2>
                <p class="popup__description">Менеджер перезвонит Вам в&nbsp;ближайшее время</p>
                <form action="submit" class="form">
                  <div class="form__input-group">
                    <div class="form__input-container">
                      <input
                        type="text"
                        name="name"
                        id="userName"
                        placeholder=" "
                        class="form__input-field form__input-field--name"
                        required
                      />
                      <label for="userName" class="form__input-label">Имя</label>
                    </div>
                    <div class="form__input-container">
                      <input
                        type="tel"
                        id="userPhone"
                        name="phone"
                        placeholder=" "
                        pattern="[0-9]{3}-[0-9]{3}-[0-9]{2}-[0-9]{2}"
                        class="form__input-field form__input-field--tel"
                        required
                      />
                      <label for="userPhone" class="form__input-label--default"
                        >+7 (___) ___ __ __</label
                      >
                      <label for="userPhone" class="form__input-label--focus"
                        >Телефон</label
                      >
                    </div>
                    <div class="form__consent-container">
                      <input
                        type="checkbox"
                        name="popup-order-consult__userConsent"
                        id="popup-order-consult__userConsent"
                        class="form__consent-checkbox"
                        checked
                        required
                      />
                      <label for="popup-order-consult__userConsent" class="form__consent-label"
                        >Я даю согласие на обработку своих
                        <a href="#" class="form__consent-link"
                          >персональных данных</a
                        ></label
                      >
                    </div>
                  </div>
                  <div class="popup__button-container">
                    <button type="submit"
                    class="button button--olive-large">
                      Перезвоните мне
                    </button>
                </form>
            </div>
        </div>
    </main>
    <footer class="footer"></footer>

    <script>
      document
        .getElementById("userPhone")
        .addEventListener("input", function (e) {
          const input = e.target;
          let value = input.value.replace(/\D/g, "");

          // Проверяем, если пользователь удалил цифры, чтобы не перезаписывать ввод
          if (e.inputType === "deleteContentBackward") {
            input.value = input.value;
            return;
          }

          // Добавляем "+7" в начало, если пользователь его еще не ввел
          if (value.startsWith("7")) {
            value = value.substring(1);
          }

          let formattedValue = "+7 (";

          if (value.length > 0) formattedValue += value.substring(0, 3);
          if (value.length >= 4) formattedValue += ") " + value.substring(3, 6);
          if (value.length >= 7) formattedValue += " " + value.substring(6, 8);
          if (value.length >= 9) formattedValue += " " + value.substring(8, 10);

          input.value = formattedValue;
        });
    </script>
    <script>
        function openWindow(popupId) {
          document.getElementById(popupId).style.display = "block";
          document.getElementById('overlay').style.display = 'block';
        }

        function closewindow(popupId) {
          document.getElementById(popupId).style.display = "none";
          document.getElementById('overlay').style.display = "none";
        }
    </script>
  </body>
</html>